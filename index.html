<!DOCTYPE html>
<html lang= 'en-US'>
  <head>
    <meta charset= 'UTF-8'>
    <title>Jellyman Kelly</title>
    <link rel= 'stylesheet' href= 'style.css'>
    <script src= '' defer></script>
  </head>

  <body>
    <div class='bigC'>
      <div class='text'>Instructions:
        <ol>
          <li>Press the corresponding letter on your keyboard</li>
          <li>Make sure the sound is on</li>
          <li>Mash the buttons quickly in any order to create a beat</li>
          <li>If you get stuck, refresh</li>
        </ol>
      </div>
      <div class='balloonStuff'>
        <p class='balloonText'>Play with the balloon to see how big or small it can get by pressing the
        'up' arrow and 'down' arrow on your keyboard!</p>
        <div class='balloonDiv' style='font-size:20px;'>
          <p class='balloon'>ðŸŽˆ</p>
        </div>
      </div>
      <div class='container'>
        <div data-key='65' class='key'>
          <img class='pic' src='./photos/Cylianhead1.jpg'>
          <kbd>A</kbd>
        </div>
        <div data-key='83' class='key'>
          <img class='pic' src='./photos/cylianhead2.jpg'>
          <kbd>S</kbd>
        </div>
        <div data-key='68' class='key'>
          <img class='pic' src='./photos/cylianhead3.jpg'>
          <kbd>D</kbd>
        </div>
        <div data-key='70' class='key'>
          <img class='pic' src='./photos/cylianhead4.jpg'>
          <kbd>F</kbd>
        </div>
        <div data-key='71' class='key'>
          <img class='pic' src='./photos/cylianhead5.jpg'>
          <kbd>G</kbd>
        </div>
        <div data-key='72' class='key'>
          <img class='pic' src='./photos/cylianhead6.jpg'>
          <kbd>H</kbd>
        </div>
        <div data-key='74' class='key'>
          <img class='pic' src='./photos/cylianhead7.jpg'>
          <kbd>J</kbd>
        </div>
        <div data-key='75' class='key'>
          <img class='pic' src='./photos/cylianhead8.jpg'>
          <kbd>K</kbd>
        </div>
        <div data-key='76' class='key'>
          <img class='pic' src='./photos/cylianhead9.jpg'>
          <kbd>L</kbd>
        </div>
      </div>
      <div class='footer'>Copyright &copy Tommy Doak</div>
    </div>

    <audio data-key='65' src='sounds/audio1.mp4'></audio>
    <audio data-key='83' src='sounds/audio11.mp4'></audio>
    <audio data-key='68' src='sounds/audio3.mp4'></audio>
    <audio data-key='70' src='sounds/audio10.mp4'></audio>
    <audio data-key='71' src='sounds/audio5.mp4'></audio>
    <audio data-key='72' src='sounds/audio6.mp4'></audio>
    <audio data-key='74' src='sounds/audio7.mp4'></audio>
    <audio data-key='75' src='sounds/audio8.mp4'></audio>
    <audio data-key='76' src='sounds/audio4.mp4'></audio>

    

    <script>
      // Soundboard
      function getKey(e) {
        const key = document.querySelector(`.key[data-key='${e.keyCode}']`);
        const audio = document.querySelector(`audio[data-key='${e.keyCode}'`);

        if (!audio) return;
        key.classList.add('playing');
        audio.currentTime = 0;
        audio.play();
      }
      function endTransition(e) {
        if (e.propertyName !== 'transform') return;
        this.classList.remove('playing');
      }
      const keys = document.querySelectorAll('.key');
      keys.forEach(key => key.addEventListener('transitionend', endTransition));
      window.addEventListener('keydown', getKey);

      // Red Balloon
      let balloon = document.querySelector('.balloon');
      let balloonDiv = document.querySelector('.balloonDiv');
      let explosion = document.createElement('p');
      let explosionImage = document.createTextNode('ðŸ’¥');
      let explodePic = document.createElement('img');
      let audio = document.createElement('audio');
      let balloonText = document.querySelector('.balloonText');
      let balloonStuff = document.querySelector('.balloonStuff');
      

      document.addEventListener('keydown', balloonBlowUp);
      
      function balloonBlowUp(e) {
        explosion.classList.add('explosion');
        explodePic.setAttribute('src', './photos/cylianhead8.jpg')
        explodePic.classList.add('exPic');
        explosion.appendChild(explosionImage);
        let currentSize = parseFloat(balloonDiv.style.fontSize);
        if (balloonDiv.contains(explosion)) {
          balloonDiv.style.cssText = 'font-size: 20px';
          balloonDiv.replaceChild(balloon, explosion);
          balloonDiv.removeChild(explodePic);
          balloonDiv.removeChild(audio);
          balloonStuff.appendChild(balloonText);
        } else if (currentSize > 300) {
          balloonDiv.removeChild(audio);
          balloonStuff.removeChild(balloonText);
          audio.setAttribute('src', 'sounds/audio3.mp4');
          balloonDiv.appendChild(audio);
          audio.currentTime = 0;
          audio.play();
          balloonDiv.replaceChild(explosion, balloon);
          balloonDiv.appendChild(explodePic);
        } else if (e.keyCode == '38') {
          balloonDiv.style.fontSize = `${currentSize * 1.1}px`;
          audio.setAttribute('src', 'sounds/Recording (4).m4a');
          balloonDiv.appendChild(audio);
          audio.currentTime = 0;
          audio.play();
          e.preventDefault();
        } else if (currentSize < 5) {
          balloonDiv.style.cssText = 'font-size: 20px'; 
        } else if (e.keyCode == '40') {
          balloonDiv.style.fontSize = `${currentSize * .9}px`;
          audio.setAttribute('src', 'sounds/Recording (9).m4a');
          balloonDiv.appendChild(audio);
          audio.currentTime = 0;
          audio.play();
          e.preventDefault();
        } else {
          return;
        }
    };
    </script>
  </body>
</html>
