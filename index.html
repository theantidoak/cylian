<!DOCTYPE html>
<html lang='en-US'>

<head>
  <meta charset='UTF-8'>
  <title>Jellyman Kelly</title>
  <link id='styling' rel='stylesheet' href='style.css'>
  <script src='' defer></script>
</head>

<body>
  <div class='bigC'>
    <div class='text'>Instructions:
      <ol>
        <li>Press the corresponding letter on your keyboard</li>
        <li>Make sure the sound is on</li>
        <li>Mash the buttons quickly in any order to create a beat</li>
      </ol>
    </div>
    <div class='balloonStuff'>
      <p class='balloonText'>Play with the balloon to see how big or small it can get by pressing the
        'up' arrow and 'down' arrow on your keyboard!</p>
      <div class='balloonDiv'>
        <p class='balloon'>ðŸŽˆ</p>
      </div>
    </div>
    <div class='container'>
      <div data-key='65' class='key'>
        <img class='pic' src='./photos/Cylianhead1.jpg'>
        <kbd>A</kbd>
      </div>
      <div data-key='83' class='key'>
        <img class='pic' src='./photos/cylianhead2.jpg'>
        <kbd>S</kbd>
      </div>
      <div data-key='68' class='key'>
        <img class='pic' src='./photos/cylianhead3.jpg'>
        <kbd>D</kbd>
      </div>
      <div data-key='70' class='key'>
        <img class='pic' src='./photos/cylianhead4.jpg'>
        <kbd>F</kbd>
      </div>
      <div data-key='71' class='key'>
        <img class='pic' src='./photos/cylianhead5.jpg'>
        <kbd>G</kbd>
      </div>
      <div data-key='72' class='key'>
        <img class='pic' src='./photos/cylianhead6.jpg'>
        <kbd>H</kbd>
      </div>
      <div data-key='74' class='key'>
        <img class='pic' src='./photos/cylianhead7.jpg'>
        <kbd>J</kbd>
      </div>
      <div data-key='75' class='key'>
        <img class='pic' src='./photos/cylianhead8.jpg'>
        <kbd>K</kbd>
      </div>
      <div data-key='76' class='key'>
        <img class='pic' src='./photos/cylianhead9.jpg'>
        <kbd>L</kbd>
      </div>
    </div>
    <div class='footer'>Copyright &copy theantidoak</div>
  </div>

  <audio data-key='65' src='sounds/audio1.mp4'></audio>
  <audio data-key='83' src='sounds/audio11.mp4'></audio>
  <audio data-key='68' src='sounds/audio3.mp4'></audio>
  <audio data-key='70' src='sounds/audio10.mp4'></audio>
  <audio data-key='71' src='sounds/audio5.mp4'></audio>
  <audio data-key='72' src='sounds/audio6.mp4'></audio>
  <audio data-key='74' src='sounds/audio7.mp4'></audio>
  <audio data-key='75' src='sounds/audio8.mp4'></audio>
  <audio data-key='76' src='sounds/audio4.mp4'></audio>
  



  <script>
    // MouseOver
    let textInstr = document.querySelector('.text');
    let coloringDiv = document.querySelector('#styling').sheet;
    coloringDiv.insertRule('.appear{ position: fixed; left: 10rem; top: 5rem; display: flex; justify-content: center; align-items: center; gap: 1rem; transition: all 4s ease }');
    let bigC = document.querySelector('.bigC');
    let hoverDiv = document.createElement('div');
    hoverDiv.classList.add('appear');
    let appearImg = document.createElement('img');
    appearImg.setAttribute('src', './photos/cylianhead2.jpg');
    appearImg.classList.add('exPic');
    let date = document.createElement('p');
    date.classList.add('date');
    coloringDiv.insertRule('.date{ max-width: 5rem }');
    hoverDiv.appendChild(appearImg);
    hoverDiv.appendChild(date);

    function colorMe(event) {
      coloringDiv.insertRule('.text{ background-color: white; color: black }');
      // Also event.target.style.color
      bigC.appendChild(hoverDiv);
      newAge()
    };

    function unColorMe() {
      coloringDiv.deleteRule('.text{ background-color: white; color: black }');
      bigC.removeChild(hoverDiv);
      date.textContent = ' ';
    };

    textInstr.addEventListener('mouseover', colorMe);
    textInstr.addEventListener('mouseout', unColorMe);

    // Age
    function newAge() {
      let birthday = new Date('Thu Dec 30 2021 04:18:03 GMT+0100 (Central European Standard Time');
      let diff = new Date() - birthday;
      let seconds = Math.floor(diff/1000);
      let minutes = Math.floor(seconds/60);
      let hours = Math.floor(minutes/60);
      let days = Math.floor(hours/24);
      let weeks = Math.floor(days/7);
      let months = Math.floor(weeks/4);
      let years = Math.floor(months/12);

      seconds %= 60;
      minutes %= 60;
      hours %= 24;
      days %= 7;
      weeks %= 4;
      months %= 12;

      let ageDisplay = document.createTextNode(`Years: ${years}  Months: ${months} Weeks: ${weeks} \n
      Days: ${days} Hours: ${hours} Minutes: ${minutes} Seconds: ${seconds}`);
      date.appendChild(ageDisplay);
    }
    
    // Soundboard
    const keys = document.querySelectorAll('.key');
    function getKey(e) {
      const key = document.querySelector(`.key[data-key='${e.keyCode}']`);
      const audio = document.querySelector(`audio[data-key='${e.keyCode}'`);
      if (!key) return;
      const removeKey = key.className;
      if (removeKey.includes('playing')) {
        keys.forEach(function (e) {
          e.classList.remove('playing')
        })
      };
      if (!audio) return;
      key.classList.add('playing');
      audio.currentTime = 0;
      audio.play();
    }
    function endTransition(e) {
      if (e.propertyName !== 'transform') return;
      this.classList.remove('playing');
    }
    window.addEventListener('keydown', getKey);
    keys.forEach(key => key.addEventListener('transitionend', endTransition));

    // Red Balloon
    let balloon = document.querySelector('.balloon');
    let balloonDiv = document.querySelector('.balloonDiv');
    let explosion = document.createElement('p');
    let explosionImage = document.createTextNode('ðŸ’¥');
    let explodePic = document.createElement('img');
    let audio = document.createElement('audio');
    let balloonText = document.querySelector('.balloonText');
    let balloonStuff = document.querySelector('.balloonStuff');
    let currentSize = document.querySelector('#styling').sheet.cssRules[13];
    let audioSource = document.createElement('source');
    let audioPoint = document.querySelector("audio[data-key='65']");
    
    document.addEventListener('keydown', balloonBlowUp);

    function balloonBlowUp(e) {
      document.body.appendChild(audio);
      explosion.classList.add('explosion');
      explodePic.setAttribute('src', './photos/cylianhead8.jpg')
      explodePic.classList.add('exPic');
      explosion.appendChild(explosionImage);
      let newSize = parseFloat(currentSize.style.fontSize);
      if (balloonDiv.contains(explosion)) {
        currentSize.style.fontSize = '20px';
        balloonDiv.replaceChild(balloon, explosion);
        balloonDiv.removeChild(explodePic);
        audio.removeChild(audioSource);
        balloonStuff.appendChild(balloonText);
      } else if (newSize > 300) {
        audio.removeChild(audioSource);
        balloonStuff.removeChild(balloonText);
        audioSource.src = 'sounds/audio3.mp4';
        audioSource.setAttribute('type', 'audio/mp4');
        audio.appendChild(audioSource);
        document.body.insertBefore(audio, audioPoint);
        audio.currentTime = 0;
        audio.play();
        explosion.style.fontSize = '515px';
        balloonDiv.replaceChild(explosion, balloon);
        balloonDiv.appendChild(explodePic);
      } else if (e.keyCode == '38') {
        if (audio.firstChild) {
          audio.removeChild(audioSource);
        }
        currentSize.style.fontSize = `${newSize * 1.1}px`;
        audioSource.src = 'sounds/Recording (4).m4a';
        audioSource.setAttribute('type', 'audio/mp4');
        audio.appendChild(audioSource);
        document.body.insertBefore(audio, audioPoint);
        audio.currentTime = .5;
        audio.play();
        e.preventDefault();
      } else if (newSize < 5) {
        currentSize.style.fontSize = '20px';
      } else if (e.keyCode == '40') {
        if (audio.firstChild) {
          audio.removeChild(audioSource);
        }
        currentSize.style.fontSize = `${newSize * .9}px`;
        audioSource.src = 'sounds/Recording (9).m4a';
        audioSource.setAttribute('type', 'audio/mp4');
        audio.appendChild(audioSource);
        document.body.insertBefore(audio, audioPoint);
        audio.currentTime = .5;
        audio.play();
        if (audio.play() !== undefined) {
          audio.play().then(_ => {})
          .catch(error => {return});
        }
        e.preventDefault();
      } else {
        return;
      }
    };
  </script>
</body>

</html>